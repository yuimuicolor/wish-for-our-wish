<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wish Upon a Star‚õß</title>
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/our-wish.css" />
  </head>
  <body>
    <header>
      <a href="./index.html">
        <div class="logo-container">
          <img
            class="logo-img"
            src="./images/wish_upon_a_star_logo.svg"
            alt="Wish Upon a Star Logo"
            width="100%"
          />
        </div>
      </a>
      <div class="tab-menu-container">
        <a href="./our-wish.html" class="tab-menu-item active">Our Wish</a>
        <a href="./photo.html" class="tab-menu-item">Photo</a>
        <a href="./music.html" class="tab-menu-item">Music</a>
        <a href="./todays-wish.html" class="tab-menu-item">Today's Wish</a>
      </div>
    </header>
    <main>
      <div class="frame">
        <div class="main-container">
          <img class="sparkle-bg" src="./images/sparkle.gif" alt="sparkle-bg" />
          <img
            class="star-1-bg"
            src="./images/silver-star-1.png"
            alt="silver-star-1"
          />
          <img
            class="star-2-bg"
            src="./images/silver-star-2.png"
            alt="silver-star-2"
            width="400px"
          />
          <div class="text-container">
            <div class="wish-title">Select Your <span>Wish</span>!</div>
            <div class="wish-subtitle">
              ÎãπÏã†Ïùò <span>ÏúÑÏãú</span>Î•º ÏÑ†ÌÉùÌï¥ Î≥¥ÏÑ∏Ïöî!
            </div>
          </div>
          <div class="card-container">
            <div class="card" data-member="sion">
              <img src="./images/ourwish-sion-card.png" alt="sion-card" />
              <span>SION</span>
            </div>
            <div class="card" data-member="riku">
              <img src="./images/ourwish-riku-card.png" alt="riku-card" />
              <span>RIKU</span>
            </div>
            <div class="card" data-member="yushi">
              <img src="./images/ourwish-yushi-card.png" alt="yushi-card" />
              <span>YUSHI</span>
            </div>
            <div class="card" data-member="jaehee">
              <img src="./images/ourwish-jaehee-card.png" alt="jaehee-card" />
              <span>JAEHEE</span>
            </div>
            <div class="card" data-member="ryo">
              <img src="./images/ourwish-ryo-card.png" alt="ryo-card" />
              <span>RYO</span>
            </div>
            <div class="card" data-member="sakuya">
              <img src="./images/ourwish-saku-card.png" alt="saku-card" />
              <span>SAKU</span>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div id="modal-template" class="modal hidden">
      <div class="modal-overlay"></div>
      <div class="modal-content-container">
        <div class="modal-content-box-left">
          <div class="modal-text-container">
            <div class="text-box">
              <div class="text-title">Name</div>
              <div class="text-content"></div>
            </div>
            <div class="text-box">
              <div class="text-title">Birth</div>
              <div class="text-content"></div>
            </div>
            <div class="text-box">
              <div class="text-title">From</div>
              <div class="text-content"></div>
            </div>
            <div class="text-box">
              <div class="text-title">Mark</div>
              <div class="text-content"></div>
            </div>
          </div>
          <div class="modal-photo-container">
            <div class="photo-box"><img src="" alt="photo1" /></div>
            <div class="photo-box"><img src="" alt="photo2" /></div>
            <div class="photo-box"><img src="" alt="photo3" /></div>
          </div>
        </div>
        <div class="modal-content-box-right">
          <div class="modal-text-container">
            <span class="modal-name"></span>
          </div>
          <div class="modal-photo-container">
            <img src="" alt="main-photo" />
          </div>
        </div>
        <button class="close-btn modal-close">
          <img src="images/card-close-btn.png" alt="close-btn" />
        </button>
      </div>
    </div>

    <!-- Ïù¥ÎØ∏ÏßÄ ÌôïÎåÄÏö© Î™®Îã¨ -->
    <div id="photoModal" class="modal hidden">
      <div class="modal-overlay"></div>
      <div class="modal-content-container">
        <div class="modal-image-wrapper">
          <img id="photoModalImg" src="" alt="modal-image" />
          <button class="modal-photo-close">
            <img src="./images/photo-close-btn-2.png" alt="close-btn" />
          </button>
        </div>
      </div>
    </div>

    <script src="./js/memberData.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const modal = document.getElementById("modal-template");
        const photoModal = document.getElementById("photoModal");
        const photoModalImg = document.getElementById("photoModalImg");

        const textTitles = modal.querySelectorAll(".text-title");
        const textContents = modal.querySelectorAll(".text-content");
        const photoBoxes = modal.querySelectorAll(".photo-box img");
        const mainPhoto = modal.querySelector(
          ".modal-content-box-right .modal-photo-container img"
        );
        const gradientTarget = modal.querySelector(".modal-content-container");
        const nameSpan = modal.querySelector(".modal-name");
        const cards = document.querySelectorAll(".card");

        // üí´ Î©§Î≤Ñ ÏÉÅÏÑ∏ Î™®Îã¨ Ïó¥Í∏∞
        const openMemberModal = (memberKey) => {
          const data = memberData[memberKey];
          if (!data) return;

          // ÌÖçÏä§Ìä∏ ÏÉâÏÉÅ & ÎÇ¥Ïö© Ï†ÅÏö©
          textTitles.forEach(
            (el) => (el.style.color = data.textColor || "#000")
          );
          textContents.forEach((el, i) => {
            el.innerText = data.textContents[i] || "";
          });

          // ÏÇ¨ÏßÑ Ï†ÅÏö©
          photoBoxes.forEach((imgEl, i) => {
            imgEl.src = data.images[i] || "";
          });
          mainPhoto.src = data.mainImage || "";

          // Í∑∏ÎùºÎîîÏñ∏Ìä∏ Î∞∞Í≤Ω
          gradientTarget.style.background = `linear-gradient(180deg, ${data.gradient[0]} 0%, #fff 25%, #fff 73.56%, ${data.gradient[1]} 100%)`;

          // Ïù¥Î¶Ñ ÌÖçÏä§Ìä∏
          nameSpan.innerText = data.name;
          nameSpan.style.fontSize =
            memberKey === "sakuya"
              ? "62px"
              : memberKey === "jaehee"
              ? "68px"
              : "80px";

          // Ïù¥Î¶Ñ Í∑∏ÎùºÎîîÏñ∏Ìä∏
          nameSpan.style.background = `linear-gradient(180deg, ${data.gradient[0]} 0%, #fff 50%, ${data.gradient[1]} 100%)`;
          nameSpan.style.webkitBackgroundClip = "text";
          nameSpan.style.backgroundClip = "text";
          nameSpan.style.webkitTextFillColor = "transparent";

          modal.classList.remove("hidden");
        };

        // üí´ Ïù¥ÎØ∏ÏßÄ ÌÅ¥Î¶≠ Ïãú ÌôïÎåÄ Î™®Îã¨ Ïó¥Í∏∞
        const openPhotoModal = (src) => {
          if (!src) return;
          photoModalImg.src = src;
          photoModal.classList.remove("hidden");
        };
        
        mainPhoto.addEventListener("click", () => {
      openPhotoModal(mainPhoto.src);
    });


        // üí´ Í≥µÌÜµ Î™®Îã¨ Îã´Í∏∞ Ï≤òÎ¶¨
        const setupModalClose = (modalElement, closeSelector) => {
          modalElement.querySelectorAll(closeSelector).forEach((btn) => {
            btn.addEventListener("click", () => {
              modalElement.classList.add("hidden");
            });
          });

          modalElement.querySelectorAll(".modal-overlay").forEach((overlay) => {
            overlay.addEventListener("click", () => {
              modalElement.classList.add("hidden");
            });
          });
        };

        // üí´ Ïù¥Î≤§Ìä∏ Ïó∞Í≤∞
        cards.forEach((card) => {
          card.addEventListener("click", () => {
            openMemberModal(card.dataset.member);
          });
        });

        photoBoxes.forEach((imgEl) => {
          imgEl.addEventListener("click", () => {
            openPhotoModal(imgEl.src);
          });
        });


        // Îã´Í∏∞ Ïù¥Î≤§Ìä∏ ÏÑ§Ï†ï
        setupModalClose(modal, ".modal-close");
        setupModalClose(photoModal, ".modal-photo-close");
      });
    </script>
  </body>
</html>
